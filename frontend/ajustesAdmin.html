<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ajustes</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/ajustes.css">
    <link href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css" rel="stylesheet">
</head>

<body>
    <!-- Sidebar -->
    <aside class="sidebar">
        <div class="logo">
            <h2>Regisdom</h2>
        </div>
        <nav class="menu">
            <a href="admin.html"><i class="bx bx-home"></i> Inicio</a>
            <a href="prestamos.html"><i class="bx bx-wallet"></i> Prestamos</a>
            <a href="cartulinas.html"><i class="bx bx-book"></i> Cartulinas</a>
            <a href="clientes.html"><i class="bx bx-group"></i> Clientes</a>
            <a href="cobradores.html"><i class="bx bx-id-card"></i> Cobradores</a>
        </nav>

        <nav class="menu-confi">
            <a href="perfilAdmin.html"><i class="bx bx-user"></i> Perfil</a>
            <a href="ajustesAdmin.html" class="active"><i class="bx bx-cog"></i> Ajustes</a>
            <button onclick="logout()"><i class="bx bx-log-out"></i> Cerrar sesión</button>
        </nav>
    </aside>

    <!-- Main content -->
    <main class="content">
        <header class="topbar">
            <h1>Ajustes</h1>
        </header>

        <div class="settings-container">
            <!-- Apariencia -->
            <section class="settings-section">
                <h3><i class="bx bx-palette"></i> Apariencia</h3>
                <div class="form-group">
                    <label for="theme">Tema de la aplicación:</label>
                    <select id="theme" name="theme">
                        <option value="light">Claro</option>
                        <option value="dark">Oscuro</option>
                        <option value="auto">Automático (según sistema)</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="language">Idioma:</label>
                    <select id="language" name="language">
                        <option value="es">Español</option>
                        <option value="en">English</option>
                        <option value="pt">Português</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="fontSize">Tamaño de fuente:</label>
                    <select id="fontSize" name="fontSize">
                        <option value="small">Pequeño</option>
                        <option value="medium" selected>Mediano</option>
                        <option value="large">Grande</option>
                        <option value="xlarge">Extra Grande</option>
                    </select>
                </div>
            </section>

            <!-- Notificaciones -->
            <section class="settings-section">
                <h3><i class="bx bx-bell"></i> Notificaciones</h3>
                <div class="notification-item">
                    <span>Notificaciones de recordatorios</span>
                    <label class="toggle-switch">
                        <input type="checkbox" id="reminder-notifications" checked>
                        <span class="slider"></span>
                    </label>
                </div>
                <div class="notification-item">
                    <span>Notificaciones de pagos</span>
                    <label class="toggle-switch">
                        <input type="checkbox" id="payment-notifications" checked>
                        <div class="slider">
                        </div>
                    </label>
                </div>
                <div class="notification-item">
                    <span>Notificaciones por email</span>
                    <label class="toggle-switch">
                        <input type="checkbox" id="email-notifications">
                        <span class="slider"></span>
                    </label>
                </div>
                <div class="notification-item">
                    <span>Sonido de notificaciones</span>
                    <label class="toggle-switch">
                        <input type="checkbox" id="sound-notifications" checked>
                        <span class="slider"></span>
                    </label>
                </div>
            </section>

            <!-- Seguridad -->
            <section class="settings-section">
                <h3><i class="bx bx-shield"></i> Seguridad</h3>
                <div class="form-group">
                    <label for="auto-logout">Cierre de sesión automático:</label>
                    <select id="auto-logout" name="auto-logout">
                        <option value="0">Nunca</option>
                        <option value="15">15 minutos</option>
                        <option value="30" selected>30 minutos</option>
                        <option value="60">1 hora</option>
                        <option value="120">2 horas</option>
                    </select>
                </div>

                <div class="notification-item">
                    <span>Requerir contraseña para acciones sensibles</span>
                    <label class="toggle-switch">
                        <input type="checkbox" id="sensitive-actions" checked>
                        <span class="slider"></span>
                    </label>
                </div>

                <div class="buttons-group">
                    <button class="btn btn-secondary" onclick="changePassword()">
                        <i class="bx bx-key"></i> Cambiar Contraseña
                    </button>
                    <button class="btn btn-secondary" onclick="manageSessions()">
                        <i class="bx bx-devices"></i> Gestionar Sesiones
                    </button>
                </div>
            </section>

            <!-- Copias de Seguridad -->
            <section class="settings-section">
                <h3><i class="bx bx-cloud-download"></i> Copias de Seguridad</h3>
                <p>Realiza copias de seguridad de tus datos regularmente.</p>

                <div class="backup-options">
                    <button class="backup-btn" onclick="createBackup()">
                        <i class="bx bx-download"></i> Descargar Backup
                    </button>
                    <button class="backup-btn" onclick="restoreBackup()">
                        <i class="bx bx-upload"></i> Restaurar Backup
                    </button>
                    <button class="backup-btn" onclick="autoBackupSettings()">
                        <i class="bx bx-cog"></i> Backup Automático
                    </button>
                </div>

                <div class="form-group" style="margin-top: 1rem;">
                    <label for="backup-frequency">Frecuencia de backup automático:</label>
                    <select id="backup-frequency" name="backup-frequency">
                        <option value="daily">Diario</option>
                        <option value="weekly" selected>Semanal</option>
                        <option value="monthly">Mensual</option>
                    </select>
                </div>
            </section>

            <!-- Zona de Peligro -->
            <section class="settings-section danger-zone">
                <h3><i class="bx bx-error"></i> Zona de Peligro</h3>
                <p>Estas acciones no se pueden deshacer. Procede con precaución.</p>

                <div class="buttons-group">
                    <button class="btn btn-danger" onclick="clearAllData()">
                        <i class="bx bx-trash"></i> Limpiar Todos los Datos
                    </button>
                    <button class="btn btn-danger" onclick="deleteAccount()">
                        <i class="bx bx-user-x"></i> Eliminar Cuenta
                    </button>
                    <button class="btn btn-secondary" onclick="exportAllData()">
                        <i class="bx bx-export"></i> Exportar Todos los Datos
                    </button>
                </div>
            </section>

            <!-- Botones de acción -->
            <section class="settings-section">
                <div class="buttons-group">
                    <button class="btn" onclick="saveSettings()">
                        <i class="bx bx-save"></i> Guardar Cambios
                    </button>
                    <button class="btn btn-secondary" onclick="resetSettings()">
                        <i class="bx bx-reset"></i> Restablecer Valores
                    </button>
                    <button class="btn btn-secondary" onclick="loadDefaultSettings()">
                        <i class="bx bx-refresh"></i> Cargar por Defecto
                    </button>
                </div>
            </section>
        </div>
    </main>

    <script>
        // Cargar configuraciones guardadas
        document.addEventListener('DOMContentLoaded', function () {
            loadSettings();
        });

        function loadSettings() {
            const settings = JSON.parse(localStorage.getItem('appSettings')) || {};

            // Cargar valores guardados
            if (settings.theme) document.getElementById('theme').value = settings.theme;
            if (settings.language) document.getElementById('language').value = settings.language;
            if (settings.fontSize) document.getElementById('fontSize').value = settings.fontSize;
            if (settings.autoLogout) document.getElementById('auto-logout').value = settings.autoLogout;
            if (settings.backupFrequency) document.getElementById('backup-frequency').value = settings.backupFrequency;

            // Toggles
            if (settings.reminderNotifications !== undefined)
                document.getElementById('reminder-notifications').checked = settings.reminderNotifications;
            if (settings.paymentNotifications !== undefined)
                document.getElementById('payment-notifications').checked = settings.paymentNotifications;
            if (settings.emailNotifications !== undefined)
                document.getElementById('email-notifications').checked = settings.emailNotifications;
            if (settings.soundNotifications !== undefined)
                document.getElementById('sound-notifications').checked = settings.soundNotifications;
            if (settings.sensitiveActions !== undefined)
                document.getElementById('sensitive-actions').checked = settings.sensitiveActions;
        }

        function saveSettings() {
            const settings = {
                theme: document.getElementById('theme').value,
                language: document.getElementById('language').value,
                fontSize: document.getElementById('fontSize').value,
                autoLogout: document.getElementById('auto-logout').value,
                backupFrequency: document.getElementById('backup-frequency').value,
                reminderNotifications: document.getElementById('reminder-notifications').checked,
                paymentNotifications: document.getElementById('payment-notifications').checked,
                emailNotifications: document.getElementById('email-notifications').checked,
                soundNotifications: document.getElementById('sound-notifications').checked,
                sensitiveActions: document.getElementById('sensitive-actions').checked
            };

            localStorage.setItem('appSettings', JSON.stringify(settings));

            // Aplicar cambios inmediatos
            applySettings(settings);

            alert('Configuraciones guardadas correctamente');
        }

        function applySettings(settings) {
            // Aplicar tema
            document.body.className = settings.theme === 'dark' ? 'dark-theme' : '';

            // Aplicar tamaño de fuente
            document.documentElement.style.fontSize = getFontSize(settings.fontSize);
        }

        function getFontSize(size) {
            const sizes = {
                'small': '14px',
                'medium': '16px',
                'large': '18px',
                'xlarge': '20px'
            };
            return sizes[size] || '16px';
        }

        function resetSettings() {
            if (confirm('¿Estás seguro de que quieres restablecer todas las configuraciones?')) {
                localStorage.removeItem('appSettings');
                location.reload();
            }
        }

        function loadDefaultSettings() {
            if (confirm('¿Cargar configuraciones por defecto?')) {
                const defaultSettings = {
                    theme: 'light',
                    language: 'es',
                    fontSize: 'medium',
                    autoLogout: '30',
                    backupFrequency: 'weekly',
                    reminderNotifications: true,
                    paymentNotifications: true,
                    emailNotifications: false,
                    soundNotifications: true,
                    sensitiveActions: true
                };
                localStorage.setItem('appSettings', JSON.stringify(defaultSettings));
                loadSettings();
                alert('Configuraciones por defecto cargadas');
            }
        }

        // Funciones para los botones (placeholder)
        function changePassword() {
            alert('Redirigiendo a cambio de contraseña...');
            // window.location.href = 'change-password.html';
        }

        function manageSessions() {
            alert('Abriendo gestión de sesiones...');
        }

        function createBackup() {
            alert('Creando copia de seguridad...');
        }

        function restoreBackup() {
            alert('Restaurando desde copia de seguridad...');
        }

        function autoBackupSettings() {
            alert('Configurando backup automático...');
        }

        function clearAllData() {
            if (confirm('¿ESTÁS SEGURO? Esta acción eliminará TODOS los datos y no se puede deshacer.')) {
                alert('Eliminando todos los datos...');
            }
        }

        function deleteAccount() {
            if (confirm('¿ESTÁS SEGURO? Esta acción eliminará tu cuenta permanentemente.')) {
                alert('Eliminando cuenta...');
            }
        }

        function exportAllData() {
            alert('Exportando todos los datos...');
        }
    </script>
</body>

</html>